{"version":3,"sources":["webpack:///./src/app/module-comune/pages/list-poi/list-poi.module.ts","webpack:///./src/app/module-comune/pages/list-poi/list-poi.page.html","webpack:///./src/app/module-comune/pages/list-poi/list-poi.page.scss","webpack:///./src/app/module-comune/pages/list-poi/list-poi.page.ts"],"names":[],"mappings":"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","file":"pages-list-poi-list-poi-module.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ListPoiPage } from './list-poi.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ListPoiPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  declarations: [ListPoiPage]\n})\nexport class ListPoiPageModule {}\n","module.exports = \"<ion-header no-border>\\n    <ion-toolbar color=\\\"secondary\\\">\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n      <ion-title>\\n          {{'title_list_poi'|translate}}\\n        </ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content padding>\\n  <ion-list no-lines id=\\\"poi-list\\\">\\n    <div *ngFor=\\\"let poi of pois\\\">      \\n      <wc-path-list-el type=\\\"POI\\\" [id]=\\\"poi.id\\\" [img]=\\\"poi.image\\\" [title]=\\\"poi.title\\\" [text]=\\\"poi.subtitle\\\" main-color=\\\"red\\\"></wc-path-list-el>\\n    </div>\\n  </ion-list>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZS1jb211bmUvcGFnZXMvbGlzdC1wb2kvbGlzdC1wb2kucGFnZS5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { NavController, AlertController } from '@ionic/angular';\nimport { DbService } from '../../services/db.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { ConfigService } from 'src/app/services/config.service';\n\n@Component({\n  selector: 'app-list-poi',\n  templateUrl: './list-poi.page.html',\n  styleUrls: ['./list-poi.page.scss'],\n})\nexport class ListPoiPage implements OnInit {\n  pois: any = [];\n  language: string;\n  category: any;\n  private type: string;\n  constructor(public navCtrl: NavController, public dbService: DbService, public alertCtrl: AlertController,\n    private router: Router, private route: ActivatedRoute, private config: ConfigService) {\n      this.language = window[this.config.getAppModuleName()]['language'];\n  }\n\n\n  ngOnInit() {\n    this.route.queryParams\n      .subscribe(params => {\n        console.log(params);\n        if (params) {\n          const cat = JSON.parse(params.category);\n          this.category = cat;\n       }\n      });\n  }\n  ionViewDidEnter() {\n    if (this.category && this.category.query) {\n      this.dbService.getObjectByQuery( this.category.query).then((data) => {\n          this.pois = data.docs.map(x => this.convertPois(x));\n        });\n    } else if (this.category && this.category.objectIds) {\n      this.category.objectIds.forEach(id => {\n        this.dbService.getObjectByDataId(id).then((data) => {\n          this.pois.push(data.docs[0]);\n        }).then(() => {\n          const tmp = this.pois;\n          this.pois = tmp.map(x => this.convertPois(x));\n        });\n      });\n    }\n    const el = document.getElementById('poi-list');\n    el.addEventListener('pathSelected', path => {\n      this.type = ((<any>path).detail).split(';')[1];\n      const id = ((<any>path).detail).split(';')[0];\n      this.goToDetail(id);\n    });\n  }\n\n  convertPois(x) {\n    const poiElement: any = {};\n    if (x) {\n      if (x.title) {\n        poiElement.title = x.title[this.language];\n      }\n      if (x.subtitle) {\n        poiElement.subtitle = x.subtitle[this.language];\n      }\n      if (x.description) {\n        poiElement.description = x.description[this.language];\n      }\n      if (x.image) {\n         poiElement.image = x.image;\n      }\n      if (x.id) {\n        poiElement.id = x.id;\n      }\n      if (x._id) {\n        poiElement.id = x._id;\n      }\n    }\n    return poiElement;\n  }\n\n  goToDetail(id) {\n    this.router.navigate(['/detail-poi'], { queryParams: { id: id, type: this.type } });\n  }\n}\n"],"sourceRoot":""}