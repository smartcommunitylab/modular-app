{"version":3,"sources":["webpack:///./src/app/module-trasporti/pages/transport-list/transport-list.module.ts","webpack:///./src/app/module-trasporti/pages/transport-list/transport-list.page.html","webpack:///./src/app/module-trasporti/pages/transport-list/transport-list.page.scss","webpack:///./src/app/module-trasporti/pages/transport-list/transport-list.page.ts"],"names":[],"mappings":"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","file":"pages-transport-list-transport-list-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { TransportListPage } from './transport-list.page';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { HttpClient } from '@angular/common/http';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: TransportListPage\n  }\n];\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, \"./assets/trasporti/i18n/\", \".json\");\n}\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule.forChild({\n      loader: {\n        provide: TranslateLoader,\n        useFactory: HttpLoaderFactory,\n        deps: [HttpClient]\n      }, isolate: true\n    }),    RouterModule.forChild(routes)\n  ],\n  declarations: [TransportListPage]\n})\nexport class TransportListPageModule {}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n                <ion-back-button class=\\\"interaction\\\"></ion-back-button>\\n            </ion-buttons>\\n    <ion-title>{{title}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n    <div>\\n        <div class=\\\"box-line\\\" [ngStyle]=\\\"getStyle()\\\">{{line}}</div>\\n        <div class=\\\"ion-text-center direction\\\">{{'choose_direction_label'|translate}}</div>\\n    </div>\\n    <ion-list class=\\\"route-list space-from-top\\\" *ngIf=\\\"view == 'list'\\\">\\n        <ion-item *ngFor=\\\"let elem of elements\\\" (click)=\\\"selectElement(elem)\\\">\\n            <div class=\\\"card card-tt\\\" >{{elem.title}}</div>\\n        </ion-item>\\n    </ion-list>\\n    <ion-grid class=\\\"space-from-top\\\" *ngIf=\\\"view == 'grid'\\\">\\n        <ion-row class=\\\"row route-grid-row\\\" *ngFor=\\\"let row of gridRows\\\">\\n            <ion-col class=\\\"col text-center\\\" *ngFor=\\\"let elem of row\\\" (click)=\\\"selectElement(elem)\\\">\\n                <div class=\\\"route-grid-element\\\" *ngIf=\\\"elem.label\\\" >\\n                    <span *ngIf=\\\"!elem.gridCode\\\">{{elem.label}}</span>\\n                    <span *ngIf=\\\"elem.gridCode\\\"><i class=\\\"icon\\\"></i></span>\\n                </div>\\n            </ion-col>\\n        </ion-row>\\n    </ion-grid>\\n</ion-content>\"","module.exports = \".route-grid-row {\\n  margin-top: 8px !important;\\n  margin-bottom: 8px !important; }\\n\\n.route-grid-element {\\n  width: 60px;\\n  height: 60px;\\n  margin: auto;\\n  border: 2px solid transparent;\\n  border-radius: 50%;\\n  text-align: center;\\n  color: #fff;\\n  text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black; }\\n\\n.interaction {\\n  color: #11b3ef !important; }\\n\\n.direction {\\n  color: #9f9f9f;\\n  font-weight: bold;\\n  font-size: 16px; }\\n\\n.box-line {\\n  width: 100px;\\n  height: 100px;\\n  border: 1px solid black;\\n  border-radius: 4px;\\n  margin: auto;\\n  line-height: 85px;\\n  text-align: center;\\n  font-size: 50px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9tb2R1bGFyQXBwL21vZHVsYXItYXBwL21vZHVsYXItYXBwL3NyYy9hcHAvbW9kdWxlLXRyYXNwb3J0aS9wYWdlcy90cmFuc3BvcnQtbGlzdC90cmFuc3BvcnQtbGlzdC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwyQkFBMEI7RUFDMUIsOEJBQTZCLEVBQzlCOztBQUVEO0VBQ0UsWUFBVztFQUNYLGFBQVk7RUFDWixhQUFZO0VBQ1osOEJBQTZCO0VBQzdCLG1CQUFrQjtFQUNsQixtQkFBa0I7RUFDbEIsWUFBVztFQUNYLGtFQUFpRSxFQUNsRTs7QUFDRDtFQUNFLDBCQUF3QixFQUMzQjs7QUFDRDtFQUNJLGVBQWE7RUFDYixrQkFBaUI7RUFDakIsZ0JBQWUsRUFDaEI7O0FBQ0Q7RUFDRSxhQUFZO0VBQ1osY0FBYTtFQUNiLHdCQUF1QjtFQUN2QixtQkFBa0I7RUFDbEIsYUFBWTtFQUNaLGtCQUFpQjtFQUNqQixtQkFBa0I7RUFDbEIsZ0JBQWUsRUFDaEIiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGUtdHJhc3BvcnRpL3BhZ2VzL3RyYW5zcG9ydC1saXN0L3RyYW5zcG9ydC1saXN0LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5yb3V0ZS1ncmlkLXJvdyB7XG4gICAgbWFyZ2luLXRvcDogOHB4ICFpbXBvcnRhbnQ7XG4gICAgbWFyZ2luLWJvdHRvbTogOHB4ICFpbXBvcnRhbnQ7XG4gIH1cbiAgXG4gIC5yb3V0ZS1ncmlkLWVsZW1lbnQge1xuICAgIHdpZHRoOiA2MHB4O1xuICAgIGhlaWdodDogNjBweDtcbiAgICBtYXJnaW46IGF1dG87XG4gICAgYm9yZGVyOiAycHggc29saWQgdHJhbnNwYXJlbnQ7XG4gICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBjb2xvcjogI2ZmZjtcbiAgICB0ZXh0LXNoYWRvdzogLTFweCAwIGJsYWNrLCAwIDFweCBibGFjaywgMXB4IDAgYmxhY2ssIDAgLTFweCBibGFjaztcbiAgfVxuICAuaW50ZXJhY3Rpb24ge1xuICAgIGNvbG9yOiAjMTFiM2VmIWltcG9ydGFudDtcbn1cbi5kaXJlY3Rpb24ge1xuICAgIGNvbG9yOiM5ZjlmOWY7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gICAgZm9udC1zaXplOiAxNnB4O1xuICB9XG4gIC5ib3gtbGluZXtcbiAgICB3aWR0aDogMTAwcHg7XG4gICAgaGVpZ2h0OiAxMDBweDtcbiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGxpbmUtaGVpZ2h0OiA4NXB4O1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICBmb250LXNpemU6IDUwcHg7XG4gIH0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { TransportService } from '../../services/transport.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService } from '../../services/config.service';\n\n@Component({\n  selector: 'app-transport-list',\n  templateUrl: './transport-list.page.html',\n  styleUrls: ['./transport-list.page.scss'],\n})\nexport class TransportListPage implements OnInit {\n  min_grid_cell_width = 90;\n  ref: string;\n  agencyId: any;\n  groupId: any;\n  title = null;\n  view = 'list';\n  hasMap = false;\n  allMarkers = null;\n  markerIcon: any;\n  icon: any;\n  elements: any;\n  gridRows: any[];\n  line: \"\";\n  color: any;\n  constructor(\n    private route: ActivatedRoute,\n    private transport: TransportService,\n    private translate: TranslateService,\n    private config: ConfigService,\n    private router: Router) { \n      var language = this.config.getLanguage();\n    this.translate.use(language);\n    }\n\n  ngOnInit() {\n    this.ref = this.route.snapshot.paramMap.get('ref');\n    this.agencyId = this.route.snapshot.paramMap.get('agencyId');;\n    this.groupId = this.route.snapshot.paramMap.get('groupId');\n    this.loadList();\n  }\n  private prepareGrid() {\n    var cols = Math.floor(window.innerWidth / this.min_grid_cell_width);\n    var gridRows = [];\n    var row = [];\n    gridRows.push(row);\n    for (var i = 0; i < this.elements.length; i++) {\n      row.push(this.elements[i]);\n      if ((i + 1) % cols == 0) {\n        row = [];\n        gridRows.push(row);\n      }\n    }\n    for (var i = row.length; i < cols; i++) {\n      row.push({});\n    }\n    this.gridRows = gridRows;\n  }\n\n\n  selectElement(e) {\n    // route element: go to table\n    if (e.route != null) {\n      this.router.navigate(['/tt',e.ref,e.agencyId,this.groupId,e.route.routeSymId,e.title, this.color]);\n\n      // group with single route: go to table\n    } else if (e.group.routes != null && e.group.routes.length == 1) {\n      this.router.navigate(['/tt',e.ref,e.agencyId,e.group.label,e.group.routes[0].routeSymId,e.title,this.color]);\n\n      // group with multiple elements: go to group\n    } else {\n      this.router.navigate(['/ttgroup',e.ref,e.agencyId, this.groupId ? (this.groupId + ',' + e.group.label) : e.group.label]\n      );\n\n    }\n  }\n  getStyle() {\n    return { 'border': '10px solid ' + this.color }\n  }\n  loadList() {\n    this.transport.getTTData(this.ref, this.agencyId, this.groupId).then(res => {\n      if (res) {\n        this.color = res.color;\n        this.hasMap = (<any>res).hasMap;\n        this.markerIcon = (<any>res).markerIcon;\n        this.icon = (<any>res).icon;\n        this.line = this.groupId?this.groupId:\"\";\n        this.title = this.line;\n        this.translate.get('timetable_label').subscribe(\n          value => {\n            this.title = this.title + \" - \" + value;\n          }\n        );\n        this.elements = this.transport.flattenData(res, this.ref, this.agencyId);\n        this.view = (<any>res).view ? (<any>res).view : 'list';\n        if (this.view == 'grid') {\n          this.prepareGrid();\n        }\n\n      }\n    })\n\n  }\n\n\n\n}\n"],"sourceRoot":""}