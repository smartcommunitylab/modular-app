{"version":3,"sources":["webpack:///./src/app/module-pulstrade/pages/street-detail/street-detail.module.ts","webpack:///./src/app/module-pulstrade/pages/street-detail/street-detail.page.html","webpack:///./src/app/module-pulstrade/pages/street-detail/street-detail.page.scss","webpack:///./src/app/module-pulstrade/pages/street-detail/street-detail.page.ts"],"names":[],"mappings":"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","file":"pages-street-detail-street-detail-module.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StreetDetailPage } from './street-detail.page';\nimport { HttpClient } from '@angular/common/http';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StreetDetailPage\n  }\n];\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/strade/i18n/', '.json');\n}\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forRoot({ loader: {\n      provide: TranslateLoader,\n      useFactory: HttpLoaderFactory,\n      deps: [HttpClient]\n    }}),\n  ],\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  declarations: [StreetDetailPage]\n})\nexport class StreetDetailPageModule {}\n","module.exports = \"<ion-header >\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"interaction\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-buttons slot=\\\"end\\\">\\n        <div (click)=\\\"toggleNotification()\\\">\\n            <ion-icon class=\\\"interaction icon-bar\\\" name=\\\"notifications\\\" *ngIf=\\\"isEnabled(); else disabled\\\"></ion-icon>\\n            <ng-template #disabled>\\n              <ion-icon class=\\\"interaction icon-bar\\\" name=\\\"notifications-outline\\\"></ion-icon>\\n            </ng-template>\\n          </div>\\n              </ion-buttons>\\n\\n    <ion-title>\\n      {{streetName}}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content padding>\\n  <ion-list  *ngIf=\\\"streetDetails\\\">\\n    <div class=\\\"clean-container\\\" *ngFor=\\\"let s of streetDetails\\\">\\n      <div [id]=\\\"s.id\\\">\\n        <div>\\n          <div class=\\\"left\\\">\\n            <b>{{s.cleaningDayStr}}</b>\\n            <!-- <h1>{{s.streetName}}</h1> -->\\n            <p>{{'CLOSED' | translate}} <b>{{s.stopStartingTimeStr}}</b> - <b>{{s.stopEndingTimeStr}}</b></p>\\n            <div>{{s.notes}}</div>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </ion-list>\\n</ion-content>\"","module.exports = \".interaction {\\n  color: #11B3EF !important; }\\n\\n.clean-container {\\n  background-color: #e3e3e3; }\\n\\n.icon-bar {\\n  font-size: 30px; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2NoaW44L0RvY3VtZW50cy93b3JrL21vZHVsYXJBcHAvbW9kdWxhci1hcHAvc3JjL2FwcC9tb2R1bGUtcHVsc3RyYWRlL3BhZ2VzL3N0cmVldC1kZXRhaWwvc3RyZWV0LWRldGFpbC5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSwwQkFBd0IsRUFDM0I7O0FBQ0Q7RUFDSSwwQkFBeUIsRUFDNUI7O0FBQ0Q7RUFDSSxnQkFBZSxFQUNsQiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZS1wdWxzdHJhZGUvcGFnZXMvc3RyZWV0LWRldGFpbC9zdHJlZXQtZGV0YWlsLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5pbnRlcmFjdGlvbiB7XG4gICAgY29sb3I6ICMxMUIzRUYhaW1wb3J0YW50O1xufVxuLmNsZWFuLWNvbnRhaW5lcntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTNlM2UzO1xufVxuLmljb24tYmFyIHtcbiAgICBmb250LXNpemU6IDMwcHg7XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService } from 'src/app/services/config.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MapService } from '../../services/map.service';\nimport { DatePipe } from '@angular/common';\nimport { NotificationService } from '../../services/notification.service';\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-street-detail',\n  templateUrl: './street-detail.page.html',\n  styleUrls: ['./street-detail.page.scss'],\n})\nexport class StreetDetailPage implements OnInit {\n  language: string;\n  myPos: any;\n  streets: any;\n  streetDetails: any = [];\n  notif: any;\n  streetName: any;\n  idNumber:any;\n  constructor(private translate: TranslateService,\n    private config: ConfigService,\n    private router: Router,\n    private mapSrv: MapService,\n    private datePipe: DatePipe,\n    private notSrv: NotificationService,\n    private route: ActivatedRoute,\n    private platform: Platform\n  ) {\n    this.language = window[this.config.getAppModuleName()]['language'];\n    this.translate.use(this.language);\n    this.myPos = window[this.config.getAppModuleName()]['geolocation'];\n  }\n\n  ngOnInit() {\n    this.streets = this.mapSrv.getData();\n    this.notif = this.convertToMapId(this.notSrv.getNotStreets());\n\n    /** Add DateTimes in string format */\n    if (this.streets)\n      this.streets.forEach(s => {\n        s.cleaningDayStr = this.datePipe.transform(s.cleaningDay, 'dd/MM/yyyy');\n        let tmp = new Date(s.stopStartingTime).toLocaleTimeString().split(':');\n        s.stopStartingTimeStr = `${tmp[0]}:${tmp[1]}`;\n        tmp = new Date(s.stopEndingTime).toLocaleTimeString().split(':');\n        s.stopEndingTimeStr = `${tmp[0]}:${tmp[1]}`;\n        s.centralCoordStr = JSON.stringify(s.centralCoords);\n        s.idNumber = parseInt(s.streetCode.replace(/\\_/g, ''), 10);\n      });\n\n    /** Parse URL params */\n    try {\n      this.route.queryParams\n        .subscribe(params => {\n          this.idNumber=params.street;\n          this.search(params.street);\n        });\n    } catch { }\n  }\n\n  convertToMapId(array: any[]): any {\n    var map = {}\n    if (array)\n      array.forEach(el => {\n        map[el.idNumber] = el;\n      })\n    return map;\n  }\n\n  search(input: any) {\n    let val;\n    if (input) {\n      if (input.detail) {\n        val = input.detail.target.value;\n      } else {\n        val = input;\n      }\n      if (val === '') {\n        this.streetDetails = [];\n      } else {\n        if (this.streets) {\n          this.streetDetails = this.streets.filter((el) => {\n            return (String(el.idNumber) === val);\n          });\n          if (this.streetDetails && this.streetDetails.length > 0)\n            this.streetName = this.streetDetails[0].streetName;\n\n          //  this.streetDetails = this.getUnique(this.streetDetails, 'streetCode')\n        }\n\n      }\n    }\n  }\n  getUnique(arr, comp) {\n\n    const unique = arr\n      .map(e => e[comp])\n\n      // store the keys of the unique objects\n      .map((e, i, final) => final.indexOf(e) === i && i)\n\n      // eliminate the dead keys & store unique objects\n      .filter(e => arr[e]).map(e => arr[e]);\n\n    return unique;\n  }\n  toggleNotification() {\n    var street = this.notif[this.idNumber];\n    if (this.notif[this.idNumber] != undefined) {\n      this.notSrv.disableNotification(street);\n    } else {\n      this.notSrv.setNotification(street);\n    }\n    this.notif = this.convertToMapId(this.notSrv.getNotStreets());\n  }\n  isEnabled() {\n    if (this.streetName)\n      return this.notif[this.idNumber] != undefined\n  }\n  /**\n   * Go to map page with specified coordinates\n   * @param coord Street coordinates\n   */\n  showInMap(coord) {\n    this.router.navigate(['/ps'], { queryParams: { coord: JSON.stringify(coord) } });\n  }\n\n\n}\n"],"sourceRoot":""}