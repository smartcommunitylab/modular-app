{"version":3,"sources":["webpack:///./src/app/module-comune/pages/detail-poi/detail-poi.module.ts","webpack:///./src/app/module-comune/pages/detail-poi/detail-poi.page.html","webpack:///./src/app/module-comune/pages/detail-poi/detail-poi.page.scss","webpack:///./src/app/module-comune/pages/detail-poi/detail-poi.page.ts"],"names":[],"mappings":"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","file":"pages-detail-poi-detail-poi-module.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailPoiPage } from './detail-poi.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailPoiPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RouterModule.forChild(routes)\n  ],\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  declarations: [DetailPoiPage]\n})\nexport class DetailPoiPageModule {}\n","module.exports = \"<ion-header no-border>\\n    <ion-toolbar>\\n      <ion-buttons slot=\\\"start\\\">\\n          <ion-back-button></ion-back-button>\\n        </ion-buttons>\\n      <ion-title *ngIf=\\\"poi\\\">\\n        {{poi.title[lang]}}\\n        </ion-title>\\n    </ion-toolbar>\\n  </ion-header>\\n\\n<ion-content padding>\\n    <wc-details *ngIf=\\\"poi\\\" [title]=\\\"poi.title[lang]\\\" [subtitle]=\\\"poi.subtitle[lang]\\\"  [text]=\\\"poi.description[lang]\\\" [info]=\\\"poi.info[lang]\\\" [contacts]=\\\"contacts\\\" [img]=\\\"poi.image\\\"></wc-details>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL21vZHVsZS1jb211bmUvcGFnZXMvZGV0YWlsLXBvaS9kZXRhaWwtcG9pLnBhZ2Uuc2NzcyJ9 */\"","import { Component, OnInit } from '@angular/core';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { DbService } from '../../services/db.service';\nimport { ConfigService } from 'src/app/services/config.service';\n\n@Component({\n  selector: 'app-detail-poi',\n  templateUrl: './detail-poi.page.html',\n  styleUrls: ['./detail-poi.page.scss'],\n})\nexport class DetailPoiPage implements OnInit {\n  poi: any;\n  contacts: any = {};\n  language: string;\n  type: string;\n  constructor(private router: Router, private route: ActivatedRoute, private dbService: DbService, private config: ConfigService) {\n    this.language = window[this.config.getAppModuleName()]['language'];\n   }\n\n  ngOnInit() {\n    this.route.queryParams\n      .subscribe(params => {\n        if (params.objectIds) {\n          this.manageoLcalId(params.objectIds);\n        } else if (params) {\n          this.type = params.type;\n          this.dbService.getObjectById(params.id).then(data => {\n            this.poi = data.docs[0];\n            this.buildContacts();\n          });\n        }\n      });\n  }\n  manageoLcalId(objectIds) {\n    if (objectIds.length == 1) {\n      this.dbService.getObjectByDataId(objectIds[0]).then(data => {\n        this.poi = data.docs[0];\n        this.type = data.docs[0].fromTime ? 'EVENT' : 'POI';\n        this.buildContacts();\n      });\n    }\n  }\n  buildContacts() {\n    if (this.contacts) {\n      this.contacts['address'] = this.poi.address[this.language];\n    }\n    if (this.type === 'POI') {\n      if (this.poi.contacts.email && this.poi.contacts.email !== '') {\n        this.contacts['email'] = this.poi.contacts.email;\n      }\n      if (this.poi.contacts.phone && this.poi.contacts.phone !== '') {\n        this.contacts['phone'] = this.poi.contacts.phone;\n      }\n      if (this.poi.url && this.poi.url !== '') {\n        this.contacts['url'] = this.poi.url;\n      }\n      this.contacts['distance'] = 0; // TOFIX\n\n    } else if (this.type === 'EVENT') {\n      if (this.poi.eventPeriod) {\n        this.contacts['date'] = this.poi.eventPeriod[this.language];\n      }\n      if (this.poi.eventTiming) {\n        this.contacts['time'] = this.poi.eventTiming[this.language];\n      }\n      if (this.poi.topics) {\n        this.contacts['cat'] = this.poi.topics[0];\n      }\n      if (this.poi.cost && this.poi.cost[this.language] !== '') {\n        this.contacts['price'] = this.poi.cost[this.language];\n      }\n    }\n\n    this.contacts = JSON.stringify(this.contacts);\n  }\n}\n"],"sourceRoot":""}