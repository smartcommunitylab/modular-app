{"version":3,"sources":["webpack:///./src/app/module-pulstrade/pages/notification/notification.module.ts","webpack:///./src/app/module-pulstrade/pages/notification/notification.page.html","webpack:///./src/app/module-pulstrade/pages/notification/notification.page.scss","webpack:///./src/app/module-pulstrade/pages/notification/notification.page.ts"],"names":[],"mappings":"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","file":"pages-notification-notification-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { NotificationPage } from './notification.page';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { HttpClient } from '@angular/common/http';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPage\n  }\n];\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/strade/i18n/', '.json');\n}\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forRoot({ loader: {\n      provide: TranslateLoader,\n      useFactory: HttpLoaderFactory,\n      deps: [HttpClient]\n    }}),\n  ],\n  declarations: [NotificationPage]\n})\nexport class NotificationPageModule {}\n","module.exports = \"<ion-header >\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"interactive\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>\\n      {{'NOTIFY' | translate}}\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\n    <ion-fab-button class=\\\"fab-notification\\\" [routerLink]=\\\"['/ps-search']\\\">\\n      <ion-icon name=\\\"add\\\"></ion-icon>\\n    </ion-fab-button>\\n\\n  </ion-fab>\\n  <div *ngIf=\\\"showStreets\\\">\\n  <ion-list no-lines *ngIf=\\\"showStreets.length>0\\\">\\n    <div *ngFor=\\\"let s of showStreets\\\">\\n      <div [id]=\\\"s.id\\\">\\n        <div>\\n          <div class=\\\"left\\\" (click)=\\\"openStreetDetail(s)\\\">\\n              <div class=\\\"interaction result\\\">{{s.streetName}}</div>\\n              <div class=\\\"interaction sub-result\\\">{{s.notes}}</div>\\n            </div>\\n          <div class=\\\"right\\\" (click)=\\\"toggleNotification(s)\\\">\\n              <ion-icon class=\\\"interaction icon-notification\\\" name=\\\"notifications\\\" *ngIf=\\\"isEnabled(s); else disabled\\\"></ion-icon>\\n              <ng-template #disabled>\\n                <ion-icon class=\\\"interaction icon-notification\\\" name=\\\"notifications-outline\\\"></ion-icon>\\n              </ng-template>\\n            </div>\\n          </div>\\n      </div>\\n    </div>\\n  </ion-list>\\n  <div class=\\\"no-notification\\\" *ngIf=\\\"showStreets.length==0\\\">\\n      {{'no_notify' | translate}}\\n  </div>\\n</div>\\n</ion-content>\"","module.exports = \"ion-card {\\n  background: white !important; }\\n\\n.left {\\n  float: left;\\n  width: 75%;\\n  padding-bottom: 5%; }\\n\\n.right {\\n  float: right;\\n  vertical-align: middle; }\\n\\n.notification {\\n  text-align: center; }\\n\\n.interaction {\\n  color: #11B3EF !important; }\\n\\n.icon-notification {\\n  font-size: 30px; }\\n\\n.fab-notification {\\n  --background:#11B3EF!important; }\\n\\n.result {\\n  font-size: 30px; }\\n\\n.sub-result {\\n  font-size: 15px; }\\n\\n.interactive {\\n  color: #11B3EF !important; }\\n\\n.no-notification {\\n  text-align: center;\\n  font-size: 22px;\\n  font-weight: bold; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9tb2R1bGFyQXBwL21vZHVsYXItYXBwL21vZHVsYXItYXBwL3NyYy9hcHAvbW9kdWxlLXB1bHN0cmFkZS9wYWdlcy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDZCQUE0QixFQUMvQjs7QUFDRDtFQUNJLFlBQVc7RUFDWCxXQUFVO0VBQ1YsbUJBQWtCLEVBQ3JCOztBQUNEO0VBQ0ksYUFBWTtFQUNaLHVCQUFzQixFQUN6Qjs7QUFDRDtFQUNJLG1CQUFrQixFQUNyQjs7QUFJRDtFQUNJLDBCQUF3QixFQUMzQjs7QUFDRDtFQUNJLGdCQUFlLEVBQ2xCOztBQUNEO0VBQ0ksK0JBQWEsRUFDaEI7O0FBQ0Q7RUFDSSxnQkFBZSxFQUNsQjs7QUFDRDtFQUNJLGdCQUFlLEVBQ2xCOztBQUNEO0VBQ0ksMEJBQXdCLEVBQzNCOztBQUNEO0VBQ0ksbUJBQWtCO0VBQ2xCLGdCQUFlO0VBQ2Ysa0JBQWlCLEVBQ3BCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlLXB1bHN0cmFkZS9wYWdlcy9ub3RpZmljYXRpb24vbm90aWZpY2F0aW9uLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkIHtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuLmxlZnQge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIHdpZHRoOiA3NSU7XG4gICAgcGFkZGluZy1ib3R0b206IDUlO1xufVxuLnJpZ2h0IHtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cbi5ub3RpZmljYXRpb24ge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5sZWZ0IGgxIHtcbiAgICAvLyBtYXJnaW4tdG9wOjE1JTtcbn1cbi5pbnRlcmFjdGlvbiB7XG4gICAgY29sb3I6ICMxMUIzRUYhaW1wb3J0YW50O1xufVxuLmljb24tbm90aWZpY2F0aW9ue1xuICAgIGZvbnQtc2l6ZTogMzBweDtcbn1cbi5mYWItbm90aWZpY2F0aW9ue1xuICAgIC0tYmFja2dyb3VuZDojMTFCM0VGIWltcG9ydGFudDtcbn1cbi5yZXN1bHR7XG4gICAgZm9udC1zaXplOiAzMHB4O1xufVxuLnN1Yi1yZXN1bHR7XG4gICAgZm9udC1zaXplOiAxNXB4O1xufVxuLmludGVyYWN0aXZle1xuICAgIGNvbG9yOiAjMTFCM0VGIWltcG9ydGFudDtcbn1cbi5uby1ub3RpZmljYXRpb257XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { MapService } from '../../services/map.service';\nimport { NotificationService } from '../../services/notification.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService } from 'src/app/services/config.service';\nimport { Platform } from '@ionic/angular';\nimport { Router } from '@angular/router';\nimport { UtilService } from '../../services/util.service';\n\n@Component({\n  selector: 'app-notification',\n  templateUrl: './notification.page.html',\n  styleUrls: ['./notification.page.scss'],\n})\nexport class NotificationPage implements OnInit {\n\n  streets: any; /** Full streets object */\n  language: string; /** Actived language */\n  notif: any; /** Notified streets */\n  showStreets: any; /** Streets object for page view */\n  notifMap: any;\n  constructor(\n    private notSrv: NotificationService,\n    private translate: TranslateService,\n    private config: ConfigService,\n    private mapSrv: MapService,\n    private platform: Platform,\n    private router: Router,\n    private utils: UtilService\n  ) {\n    this.language = window[this.config.getAppModuleName()]['language'];\n    this.translate.use(this.language);\n  }\n\n  ngOnInit() {\n\n  }\n  ionViewDidEnter() {\n    // this.utils.presentLoading();\n    this.notif = this.notSrv.getNotStreets();\n    // this.utils.hideLoading();\n    this.notifMap = this.convertToMapId(this.notSrv.getNotStreets());\n    this.streets = this.mapSrv.getData();\n    this.buildShowNot();\n  }\n  /**\n   * Build unique streets elements, and put them in `showStreets`\n   */\n  buildShowNot() {\n    let tmp = [];\n    if (this.notif) {\n      this.notif.forEach(s => {\n        if (s && tmp.filter(t => t.idNumber === s.idNumber).length === 0) {\n          tmp.push(s);\n        }\n      });\n    }\n    this.showStreets = tmp;\n  }\n  toggleNotification(street) {\n    if (this.notifMap[street.idNumber] != undefined) {\n      this.notSrv.disableNotification(street);\n    } else {\n      this.notSrv.setNotification(street);\n    }\n    this.notifMap = this.convertToMapId(this.notSrv.getNotStreets());\n  }\n\n  convertToMapId(array: any[]): any {\n    var map = {}\n    if (array)\n      array.forEach(el => {\n        if (el && el.idNumber)\n          map[el.idNumber] = el;\n      })\n    return map;\n  }\n\n  isEnabled(street) {\n    if (street)\n      return this.notifMap[street.idNumber] != undefined\n    return false\n  }\n  /**\n   * Enable or disable notifications for the choosen street.\n   * It also manipulates DOM for dynamic visualization.\n   * @param event `Click` event on ion-toggle\n   */\n  toggle(event) {\n    this.platform.ready().then(() => {\n      let element, toggle: any;\n      const street = this.streets.filter(function (val) {\n        return val.streetName === event.detail.value;\n      });\n      if (event.detail.checked) {\n        street.forEach(s => {\n          element = document.getElementById('not-' + s.idNumber);\n          toggle = document.getElementById('tog-' + s.idNumber);\n          this.notSrv.setNotification(street); /** Enable Notification */\n          element.style.color = 'green';\n          this.translate.get('NOTIFY-ENA').subscribe(x => {\n            element.innerHTML = x;\n          });\n          toggle.checked = true;\n        });\n      } else {\n        street.forEach(s => {\n          element = document.getElementById('not-' + s.idNumber);\n          toggle = document.getElementById('tog-' + s.idNumber);\n          this.notSrv.disableNotification(street); /** Disable Notification */\n          element.style.color = '#737373';\n          this.translate.get('NOTIFY-DIS').subscribe(x => {\n            element.innerHTML = x;\n          });\n          toggle.checked = false;\n        });\n      }\n    });\n  }\n  openStreetDetail(s) {\n    this.router.navigate(['street-detail'], { queryParams: { street: s.idNumber } });\n  }\n}\n"],"sourceRoot":""}