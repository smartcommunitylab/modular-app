{"version":3,"sources":["webpack:///./src/app/module-comune/class/MainPage.ts","webpack:///./src/app/module-comune/pages/home/home.module.ts","webpack:///./src/app/module-comune/pages/home/home.page.html","webpack:///./src/app/module-comune/pages/home/home.page.scss","webpack:///./src/app/module-comune/pages/home/home.page.ts","webpack:///./src/app/module-comune/services/config.service.ts"],"names":[],"mappings":"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","file":"pages-home-home-module.js","sourcesContent":["import { OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { NavController } from '@ionic/angular';\n\nconst ROUTER_KEY = \"router-key\"\n\n\nexport class MainPage implements OnInit {\n\n  constructor(\n    public translate: TranslateService,\n    public navCtrl: NavController\n  ) {\n    this.initTranslate();\n  }\n  public language: string = 'it';\n\n  ngOnInit() {\n    this.language = this.translate.currentLang;\n  }\n  ionViewDidEnter() {\n    this.language = this.translate.currentLang;\n  }\n\n  private initTranslate() {\n    // Set the default language for translation strings, and the current language.\n    if (window[\"app-module-language\"])\n      return this.translate.setDefaultLang(window[\"app-module-language\"]);\n    this.translate.setDefaultLang(this.language);\n\n  }\n}","import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { RouterModule } from '@angular/router';\nimport { HomePage } from './home.page';\nimport { TranslateModule } from '@ngx-translate/core';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    TranslateModule,\n    RouterModule.forChild([\n      {\n        path: '',\n        component: HomePage\n      }\n    ])\n  ],\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","module.exports = \"<ion-header no-border>\\n  <ion-toolbar color=\\\"secondary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-menu-button></ion-menu-button>\\n    </ion-buttons>\\n    <ion-title>\\n        {{'title_app'|translate}}\\n      </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <!-- <div  *ngIf=\\\"elementsGallery\\\"> -->\\n    <wc-gallery id=\\\"gallery\\\" [gallery]=\\\"elementsGalleryStr\\\">\\n    </wc-gallery>\\n  <!-- </div> -->\\n\\n  <ion-grid id=\\\"category-buttons\\\">\\n    <ion-row>\\n      <ion-col *ngFor=\\\"let category of categories\\\">\\n        <wc-category-button [category]=\\\"category.name\\\" [icon]=\\\"category.image\\\" icon-align=\\\"top\\\" icon-fill=\\\"red\\\"\\n          text-color=\\\"red\\\" (click)=\\\"goToCategory(category)\\\">\\n        </wc-category-button>\\n      </ion-col>\\n    </ion-row>\\n  </ion-grid>\\n</ion-content>\"","module.exports = \".gallery {\\n  width: 50%;\\n  height: 70%;\\n  margin: auto;\\n  overflow: hidden; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2NoaW44L0RvY3VtZW50cy93b3JrL21vZHVsYXJBcHAvbW9kdWxhci1hcHAvc3JjL2FwcC9tb2R1bGUtY29tdW5lL3BhZ2VzL2hvbWUvaG9tZS5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0E7RUFDSSxXQUFVO0VBQ1YsWUFBVztFQUNYLGFBQVk7RUFDWixpQkFBZ0IsRUFDbkIiLCJmaWxlIjoic3JjL2FwcC9tb2R1bGUtY29tdW5lL3BhZ2VzL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcbi5nYWxsZXJ5IHtcbiAgICB3aWR0aDogNTAlO1xuICAgIGhlaWdodDogNzAlO1xuICAgIG1hcmdpbjogYXV0bztcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xufSJdfQ== */\"","import { Component } from '@angular/core';\nimport { NavController, AlertController } from '@ionic/angular';\nimport { DbService } from '../../services/db.service';\nimport { Router } from '@angular/router';\nimport { ConfigService } from '../../services/config.service'\nimport { TranslateService } from '@ngx-translate/core';\nimport { MainPage } from '../../class/MainPage'\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage extends MainPage {\n  categories: any = [];\n  elementsGallery: string[] = null;\n  pois: any = [];\n  language: string = \"it\";\n  elementsGalleryStr: string;\n  constructor(public navCtrl: NavController, public translate: TranslateService, private config: ConfigService, private router: Router, public dbService: DbService, public alertCtrl: AlertController) {\n    super(translate, navCtrl);\n  }\n  ngOnInit() {\n    this.translate.get('title_page').subscribe(\n      value => {\n        console.log(value);\n      }\n    );\n  }\n  ionViewDidEnter() {\n    this.elementsGallery = [];\n    this.config.init();\n    this.dbService.getCategories().then((data) => {\n      // set button categories\n      this.categories = data.map(x => this.convertCategories(x));\n    });\n    this.dbService.getElementsGallery().then((data) => {\n      // set gallery with preview\n      this.elementsGallery = data.map(x => this.convertGallery(x));\n      this.elementsGalleryStr = JSON.stringify(this.elementsGallery);\n      // console.log(JSON.stringify(this.elementsGallery));\n    });\n    // const categoryButtonsElement = document.querySelector('category-buttons');\n    window.addEventListener('categorySelected', category => {\n      console.log(category);\n      this.goToCategory(category);\n    });\n    window.addEventListener('elementSelected', item => {\n      console.log(item);\n      this.goToItem(item[\"detail\"]);\n    });\n\n  }\n  ionViewDidLoad() {\n    const categoryButtonsElement = document.querySelector('category-buttons');\n    categoryButtonsElement.addEventListener('categorySelected', category => {\n      console.log(category);\n      this.goToCategory(category);\n    });\n\n  }\n\n\n  convertGallery(x) {\n    const galleryElement: any = {};\n    if (x && x.key) {\n      if (x.key.name) {\n        galleryElement.name = x.key.name[this.language];\n      }\n      if (x.key.image) {\n        galleryElement.image = x.key.image[this.language];\n      }\n      if (x.key.objectIds) {\n        galleryElement.objectIds = x.key.objectIds;\n      }\n    }\n    return galleryElement;\n  }\n\n  convertCategories(x) {\n    const categoryElement: any = {};\n    categoryElement.id = x.key.id;\n    if (x && x.key) {\n      if (x.key.name) {\n        categoryElement.name = x.key.name[this.language];\n      }\n      if (x.key.image) {\n        categoryElement.image = x.key.image;\n      }\n    }\n    return categoryElement;\n  }\n\n  goToCategory(category) {\n    this.router.navigate(['/list-categories'], { queryParams: { category: JSON.stringify(category) } });\n\n  }\n  goToItem(item) {\n    console.log(item);\n    this.dbService.getObjectByDataId(item.objectIds[0]).then(res => {\n      var found = res.docs.filter(obj => {\n        return obj[\"element-type\"] != undefined\n      })\n      this.router.navigate(['/detail-poi'], { queryParams: { _id: found._id } });\n    })\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ConfigService {\n\n  menu = [\n    {\n      title: \"Home\",\n      url: \"/home\",\n      icon: \"home\"\n    }\n  ]\n  constructor() {\n\n  }\n  init() {\n    localStorage.setItem('comune-menu-', JSON.stringify(this.menu));\n\n  }\n\n}\n"],"sourceRoot":""}