{"version":3,"sources":["webpack:///./src/app/module-pulstrade/pages/search/search.module.ts","webpack:///./src/app/module-pulstrade/pages/search/search.page.html","webpack:///./src/app/module-pulstrade/pages/search/search.page.scss","webpack:///./src/app/module-pulstrade/pages/search/search.page.ts"],"names":[],"mappings":"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","file":"pages-search-search-module.js","sourcesContent":["import { NgModule, CUSTOM_ELEMENTS_SCHEMA } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SearchPage } from './search.page';\nimport { TranslateHttpLoader } from '@ngx-translate/http-loader';\nimport { TranslateModule, TranslateLoader } from '@ngx-translate/core';\nimport { HttpClient } from '@angular/common/http';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SearchPage\n  }\n];\nexport function HttpLoaderFactory(http: HttpClient) {\n  return new TranslateHttpLoader(http, './assets/strade/i18n/', '.json');\n}\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    TranslateModule.forRoot({ loader: {\n      provide: TranslateLoader,\n      useFactory: HttpLoaderFactory,\n      deps: [HttpClient]\n    }}),\n  ],\n  schemas: [ CUSTOM_ELEMENTS_SCHEMA ],\n  declarations: [SearchPage]\n})\nexport class SearchPageModule {}\n","module.exports = \"<ion-header >\\n    <!-- <ion-searchbar  (ionCancel)=\\\"toggleSearch()\\\" showCancelButton=\\\"always\\\" animated (ionInput)=\\\"search($event)\\\" placeholder=\\\"{{'SEARCH' | translate}}\\\">\\n      </ion-searchbar> -->\\n  <ion-toolbar>\\n      <ion-searchbar showCancelButton=\\\"never\\\" animated (ionInput)=\\\"search($event)\\\" placeholder=\\\"{{'SEARCH' | translate}}\\\">\\n        </ion-searchbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button class=\\\"interaction\\\"></ion-back-button>\\n    </ion-buttons>\\n    <!-- <ion-title>\\n      {{'SEARCH' | translate}}\\n    </ion-title> -->\\n  </ion-toolbar>\\n</ion-header>\\n\\n\\n<ion-content padding>\\n    <!-- <ion-spinner name=\\\"dots\\\" *ngIf=\\\"searching\\\"></ion-spinner> -->\\n\\n  <ion-list no-lines *ngIf=\\\"showStreets\\\">\\n    <div *ngFor=\\\"let s of showStreets\\\">\\n      <div [id]=\\\"s.id\\\">\\n        <div>\\n          <div class=\\\"left\\\" [routerLink]=\\\"['/street-detail']\\\" [queryParams]=\\\"{street: s.idNumber }\\\" routerDirection=\\\"forward\\\">\\n            <div class=\\\"result interaction\\\" >{{s.streetName}}</div>\\n            <div class=\\\"sub-result interaction\\\" >{{s.tratto}}</div>\\n          </div>\\n          <div class=\\\"right\\\" (click)=\\\"toggleNotification(s)\\\">\\n            <ion-icon class=\\\"interaction icon-notification\\\" name=\\\"notifications\\\" *ngIf=\\\"isEnabled(s); else disabled\\\"></ion-icon>\\n            <ng-template #disabled>\\n              <ion-icon  class=\\\"interaction icon-notification\\\" name=\\\"notifications-outline\\\"></ion-icon>\\n            </ng-template>\\n          </div>\\n        </div>\\n      </div>\\n    </div>\\n  </ion-list>\\n  <div class=\\\"no-results\\\" *ngIf=\\\"noResults\\\">\\n    {{'no_roads_search'|translate}}\\n  </div>\\n</ion-content>\"","module.exports = \"ion-card {\\n  background: white !important; }\\n\\n.left {\\n  float: left;\\n  width: 75%; }\\n\\n.right {\\n  float: right;\\n  vertical-align: middle; }\\n\\n.notification {\\n  text-align: center; }\\n\\n.interaction {\\n  color: #11B3EF !important; }\\n\\n.icon-notification {\\n  font-size: 30px; }\\n\\n.result {\\n  font-size: 30px; }\\n\\n.sub-result {\\n  font-size: 15px; }\\n\\nion-searchbar {\\n  z-index: 999; }\\n\\n.no-results {\\n  text-align: center;\\n  font-size: 22px;\\n  font-weight: bold; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy91c2VyL0RvY3VtZW50cy9Qcm9qZWN0cy9tb2R1bGFyQXBwL21vZHVsYXItYXBwL21vZHVsYXItYXBwL3NyYy9hcHAvbW9kdWxlLXB1bHN0cmFkZS9wYWdlcy9zZWFyY2gvc2VhcmNoLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLDZCQUE0QixFQUMvQjs7QUFDRDtFQUNJLFlBQVc7RUFDWCxXQUFVLEVBRWI7O0FBQ0Q7RUFDSSxhQUFZO0VBQ1osdUJBQXNCLEVBQ3pCOztBQUNEO0VBQ0ksbUJBQWtCLEVBQ3JCOztBQUNEO0VBQ0ksMEJBQXdCLEVBQzNCOztBQUVEO0VBQ0ksZ0JBQWUsRUFDbEI7O0FBQ0Q7RUFDSSxnQkFBZSxFQUNsQjs7QUFDRDtFQUNJLGdCQUFlLEVBQ2xCOztBQUNEO0VBS0ksYUFBWSxFQUNmOztBQUNEO0VBQ0ksbUJBQWtCO0VBQ2xCLGdCQUFlO0VBQ2Ysa0JBQWlCLEVBQ3BCIiwiZmlsZSI6InNyYy9hcHAvbW9kdWxlLXB1bHN0cmFkZS9wYWdlcy9zZWFyY2gvc2VhcmNoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImlvbi1jYXJkIHtcbiAgICBiYWNrZ3JvdW5kOiB3aGl0ZSAhaW1wb3J0YW50O1xufVxuLmxlZnQge1xuICAgIGZsb2F0OiBsZWZ0O1xuICAgIHdpZHRoOiA3NSU7XG4gICAgLy8gcGFkZGluZy1ib3R0b206IDUlO1xufVxuLnJpZ2h0IHtcbiAgICBmbG9hdDogcmlnaHQ7XG4gICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbn1cbi5ub3RpZmljYXRpb24ge1xuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbn1cbi5pbnRlcmFjdGlvbiB7XG4gICAgY29sb3I6ICMxMUIzRUYhaW1wb3J0YW50O1xufVxuXG4uaWNvbi1ub3RpZmljYXRpb257XG4gICAgZm9udC1zaXplOiAzMHB4O1xufVxuLnJlc3VsdHtcbiAgICBmb250LXNpemU6IDMwcHg7XG59XG4uc3ViLXJlc3VsdHtcbiAgICBmb250LXNpemU6IDE1cHg7XG59XG5pb24tc2VhcmNoYmFyIHtcbiAgICAvLyBwb3NpdGlvbjogZml4ZWQ7XG4gICAgLy8gd2lkdGg6IGNhbGMoMTAwJSAtIDYwcHgpO1xuICAgIC8vIHRvcDogM3B4O1xuICAgIC8vIC8vIHRvcDogNThweDtcbiAgICB6LWluZGV4OiA5OTk7XG59XG4ubm8tcmVzdWx0c3tcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgZm9udC1zaXplOiAyMnB4O1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xufSJdfQ== */\"","import { Component, OnInit } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ConfigService } from 'src/app/services/config.service';\nimport { Router, ActivatedRoute } from '@angular/router';\nimport { MapService } from '../../services/map.service';\nimport { DatePipe } from '@angular/common';\nimport { NotificationService } from '../../services/notification.service';\nimport { Platform } from '@ionic/angular';\n\n@Component({\n  selector: 'app-search',\n  templateUrl: './search.page.html',\n  styleUrls: ['./search.page.scss'],\n  providers: [DatePipe]\n})\nexport class SearchPage implements OnInit {\n\n  language: string;\n  myPos: any;\n  streets: any;\n  notif: any;\n  noResults: boolean = false;\n  showStreets: any = [];\n  searching: boolean = false;\n  constructor(private translate: TranslateService,\n    private config: ConfigService,\n    private notSrv: NotificationService,\n    private router: Router,\n    private mapSrv: MapService,\n    private datePipe: DatePipe,\n    private notificationSrv: NotificationService,\n    private route: ActivatedRoute,\n    private platform: Platform\n  ) {\n    this.language = window[this.config.getAppModuleName()]['language'];\n    this.translate.use(this.language);\n    this.myPos = window[this.config.getAppModuleName()]['geolocation'];\n  }\n\n  ngOnInit() {\n\n  }\n\n  convertToMapId(array: any[]): any {\n    var map = {}\n    if (array)\n      array.forEach(el => {\n        if (el && el.idNumber)\n          map[el.idNumber] = el;\n      })\n    return map;\n  }\n\n  /**\n   * Set searchbar focus\n   */\n  ionViewDidEnter() {\n    const el = document.querySelector('ion-searchbar');\n    if (el) {\n      el.setFocus();\n    }\n    this.notif = this.convertToMapId(this.notSrv.getNotStreets());\n    this.streets = this.mapSrv.getData();\n    /** Add DateTimes in string format */\n    if (this.streets)\n      this.streets.forEach(s => {\n        s.cleaningDayStr = this.datePipe.transform(s.cleaningDay, 'dd/MM/yyyy');\n        let tmp = new Date(s.stopStartingTime).toLocaleTimeString().split(':');\n        s.stopStartingTimeStr = `${tmp[0]}:${tmp[1]}`;\n        tmp = new Date(s.stopEndingTime).toLocaleTimeString().split(':');\n        s.stopEndingTimeStr = `${tmp[0]}:${tmp[1]}`;\n        s.centralCoordStr = JSON.stringify(s.centralCoords);\n        s.idNumber = parseInt(s.streetCode.replace(/\\_/g, ''), 10);\n      });\n\n    /** Parse URL params */\n    try {\n      this.route.queryParams\n        .subscribe(params => {\n          this.search(params.street);\n        });\n    } catch { }\n  }\n\n  /**\n   * Search streets and put them in `showStreets` object\n   * @param input `(change)` event\n   */\n  typingTimer;                \n  doneTypingInterval = 500;  \n  search(input: any) {\n    let val;\n    clearTimeout(this.typingTimer);\n    this.typingTimer = setTimeout(() => {\n      if (input) {\n        // this.searching=true;\n\n        if (input.detail) {\n          val = input.detail.target.value;\n\n        }\n        //  else {\n        //   val = input;\n        // }\n        if (val === '') {\n          this.showStreets = [];\n        } else {\n          if (this.streets) {\n            this.showStreets = this.streets.filter((el) => {\n              return (el.streetName.toLowerCase().indexOf(val.toLowerCase()) > -1);\n            });\n            this.showStreets = this.getUnique(this.showStreets, 'streetCode')\n            if (this.showStreets.length == 0) { this.noResults = true }\n            else { this.noResults = false }\n            \n          }\n\n        }\n        // this.searching=false;\n\n      }\n    }, this.doneTypingInterval);\n  }\n  getUnique(arr, comp) {\n\n    const unique = arr\n      .map(e => e[comp])\n\n      // store the keys of the unique objects\n      .map((e, i, final) => final.indexOf(e) === i && i)\n\n      // eliminate the dead keys & store unique objects\n      .filter(e => arr[e]).map(e => arr[e]);\n\n    return unique;\n  }\n\n  toggleNotification(street) {\n    if (this.notif[street.idNumber] != undefined) {\n      this.notificationSrv.disableNotification(street);\n    } else {\n      this.notSrv.setNotification(street);\n    }\n    this.notif = this.convertToMapId(this.notSrv.getNotStreets());\n  }\n  isEnabled(street) {\n    if (street)\n      return this.notif[street.idNumber] != undefined\n    return false;\n  }\n  /**\n   * Go to map page with specified coordinates\n   * @param coord Street coordinates\n   */\n  showInMap(coord) {\n    this.router.navigate(['/ps'], { queryParams: { coord: JSON.stringify(coord) } });\n  }\n\n  /**\n   * Enable or disable notifications\n   * @param event `click` event\n   */\n  toggle(event) {\n    this.platform.ready().then(() => {\n      let element, toggle: any;\n      if (this.streets) {\n        const street = this.streets.filter(function (val) {\n          return val.idNumber === event.detail.value;\n        });\n        if (event.detail.checked) {\n          street.forEach(s => {\n            element = document.getElementById('not-' + s.idNumber);\n            toggle = document.getElementById('tog-' + s.idNumber);\n            this.notificationSrv.setNotification(street);\n            element.style.color = 'green';\n            this.translate.get('NOTIFY-ENA').subscribe(x => {\n              element.innerHTML = x;\n            });\n            toggle.checked = true;\n          });\n        } else {\n          street.forEach(s => {\n            element = document.getElementById('not-' + s.idNumber);\n            toggle = document.getElementById('tog-' + s.idNumber);\n            this.notificationSrv.disableNotification(street);\n            element.style.color = '#737373';\n            this.translate.get('NOTIFY-DIS').subscribe(x => {\n              element.innerHTML = x;\n            });\n            toggle.checked = false;\n          });\n        }\n      }\n    });\n  }\n}\n"],"sourceRoot":""}